import React from 'react';
import { View, Text, StyleSheet, ScrollView, TouchableOpacity } from 'react-native';
import { SafeAreaView } from 'react-native-safe-area-context';
import { router, useLocalSearchParams } from 'expo-router';

type TermsType = 'service' | 'privacy' | 'consignment' | 'openBanking' | 'openBankingService' | 'openBankingPrivacy' | 'openBankingThirdParty';

const termsContent = {
  service: {
    title: 'Wallet Slot 서비스 이용약관',
    content: `제1조 (목적)
이 약관은 Wallet Slot(이하 "회사")이 제공하는 서비스의 이용과 관련하여 회사와 이용자 간의 권리, 의무 및 책임사항을 규정함을 목적으로 합니다.

제2조 (정의)
1. "서비스"란 회사가 제공하는 금융 정보 관리 및 계좌 연동 서비스를 의미합니다.
2. "이용자"란 서비스에 접속하여 이 약관에 따라 서비스를 이용하는 회원을 의미합니다.

제3조 (약관의 효력 및 변경)
1. 이 약관은 서비스를 이용하고자 하는 모든 이용자에게 그 효력이 발생합니다.
2. 회사는 필요하다고 인정되는 경우 이 약관을 변경할 수 있으며, 변경된 약관은 서비스 내 공지사항을 통해 공지합니다.

제4조 (서비스의 제공)
1. 회사는 이용자에게 다음과 같은 서비스를 제공합니다:
   가. 계좌 정보 조회 및 관리
   나. 금융 거래 내역 조회
   다. 예산 관리 및 분석
   라. 기타 회사가 정하는 서비스

제5조 (이용자의 의무)
1. 이용자는 다음 행위를 하여서는 안 됩니다:
   가. 서비스의 안정적 운영을 방해하는 행위
   나. 다른 이용자의 개인정보를 수집하거나 저장하는 행위
   다. 서비스를 이용하여 얻은 정보를 회사의 사전 승낙 없이 복제, 송신, 출판, 배포, 방송 기타 방법에 의하여 영리목적으로 이용하거나 제3자에게 이용하게 하는 행위

제6조 (서비스의 중단)
1. 회사는 컴퓨터 등 정보통신설비의 보수점검, 교체 및 고장, 통신의 두절 등의 사유가 발생한 경우에는 서비스의 제공을 일시적으로 중단할 수 있습니다.

제7조 (손해배상)
1. 회사는 무료로 제공되는 서비스와 관련하여 회원에게 어떠한 손해가 발생하더라도 동 손해가 회사의 고의 또는 중대한 과실에 의한 경우를 제외하고는 이에 대하여 책임을 부담하지 아니합니다.

제8조 (준거법 및 관할법원)
1. 이 약관에 명시되지 않은 사항은 전기통신사업법 등 관계법령과 상관례에 따릅니다.
2. 서비스 이용으로 발생한 분쟁에 대해 소송이 제기되는 경우 회사의 본사 소재지를 관할하는 법원을 전속 관할법원으로 합니다.

부칙
이 약관은 2024년 1월 1일부터 시행합니다.`
  },
  privacy: {
    title: '개인(신용)정보 수집 및 이용',
    content: `제1조 (개인정보의 수집 및 이용 목적)
회사는 다음의 목적을 위하여 개인정보를 처리합니다:
1. 서비스 제공 및 계약 이행
2. 회원 식별 및 본인 확인
3. 고객 상담 및 불만 처리
4. 서비스 개선 및 신규 서비스 개발

제2조 (수집하는 개인정보의 항목)
1. 필수항목: 이름, 생년월일, 성별, 휴대폰번호, 이메일주소
2. 선택항목: 주소, 직업, 소득수준
3. 자동수집항목: IP주소, 쿠키, 서비스 이용기록, 접속로그

제3조 (개인정보의 수집 방법)
1. 회원가입 시 직접 입력
2. 서비스 이용 과정에서 자동 수집
3. 제휴사로부터의 제공

제4조 (개인정보의 이용 및 제공)
1. 회사는 수집한 개인정보를 다음의 경우에 이용합니다:
   가. 서비스 제공을 위한 본인 확인
   나. 고객 상담 및 민원 처리
   다. 서비스 개선 및 신규 서비스 개발
   라. 법령에 의한 요구사항 처리

2. 회사는 이용자의 동의 없이 개인정보를 제3자에게 제공하지 않습니다. 단, 다음의 경우는 예외로 합니다:
   가. 법령에 의해 요구되는 경우
   나. 이용자가 사전에 동의한 경우

제5조 (개인정보의 보유 및 이용기간)
1. 회사는 개인정보 수집 및 이용목적이 달성된 후에는 해당 정보를 지체없이 파기합니다.
2. 단, 다음의 정보에 대해서는 아래의 이유로 명시한 기간 동안 보존합니다:
   가. 계약 또는 청약철회 등에 관한 기록: 5년
   나. 대금결제 및 재화 등의 공급에 관한 기록: 5년
   다. 소비자의 불만 또는 분쟁처리에 관한 기록: 3년

제6조 (개인정보의 파기)
1. 회사는 개인정보 보유기간의 경과, 처리목적 달성 등 개인정보가 불필요하게 되었을 때에는 지체없이 해당 개인정보를 파기합니다.

제7조 (개인정보의 안전성 확보조치)
1. 회사는 개인정보의 안전성 확보를 위해 다음과 같은 조치를 취하고 있습니다:
   가. 관리적 조치: 내부관리계획 수립, 전담조직 운영
   나. 기술적 조치: 개인정보처리시스템 등의 접근권한 관리, 접근통제시스템 설치
   다. 물리적 조치: 전산실, 자료보관실 등의 접근통제

제8조 (개인정보보호책임자)
1. 회사는 개인정보 처리에 관한 업무를 총괄해서 책임지고, 개인정보 처리와 관련한 정보주체의 불만처리 및 피해구제 등을 위하여 아래와 같이 개인정보보호책임자를 지정하고 있습니다:
   - 성명: 김개인정보
   - 연락처: privacy@walletslot.com

부칙
이 방침은 2024년 1월 1일부터 시행합니다.`
  },
  consignment: {
    title: '개인정보 처리 위탁 - 알리고 송 대형',
    content: `제1조 (개인정보 처리 위탁 현황)
회사는 서비스 제공을 위해 다음과 같이 개인정보 처리업무를 위탁하고 있습니다:

위탁받는 자: 알리고 송 대형
위탁업무의 내용: SMS 발송 서비스
개인정보의 보유 및 이용기간: 위탁계약 종료 시까지

제2조 (위탁계약 체결 시 고려사항)
1. 위탁업무 수행 목적 외 개인정보 처리 금지
2. 개인정보의 기술적·관리적 보호조치
3. 위탁업무의 목적 및 범위의 명확화
4. 재위탁 제한
5. 수탁자에 대한 관리·감독

제3조 (수탁자의 의무)
1. 수탁자는 위탁받은 업무의 범위를 벗어나 개인정보를 처리하여서는 아니 됩니다.
2. 수탁자는 개인정보의 분실, 도난, 유출, 변조, 훼손되지 않도록 안전성 확보에 필요한 기술적·관리적 보호조치를 취하여야 합니다.
3. 수탁자는 위탁업무 종료 시 개인정보를 즉시 반납하거나 파기하여야 합니다.

제4조 (위탁업무의 변경)
1. 위탁업무의 내용이나 수탁자가 변경될 경우에는 지체없이 본 개인정보처리방침을 통하여 공개하겠습니다.

제5조 (손해배상)
1. 수탁자가 위탁업무 수행 중 개인정보를 분실, 도난, 유출, 변조, 훼손한 경우, 회사는 수탁자에게 손해배상을 청구할 수 있습니다.

부칙
이 방침은 2024년 1월 1일부터 시행합니다.`
  },
  openBanking: {
    title: '오픈뱅킹 기본 동의',
    content: `제1조 (오픈뱅킹 서비스 개요)
1. 오픈뱅킹 서비스란 금융회사가 고객의 동의를 받아 고객의 계좌정보를 조회하거나 계좌이체를 실행할 수 있도록 하는 서비스를 의미합니다.
2. 본 서비스는 금융결제원의 오픈뱅킹 시스템을 통해 제공됩니다.

제2조 (수집·이용하는 개인정보)
1. 필수 수집항목: 계좌번호, 계좌잔액, 거래내역, 예금주명
2. 선택 수집항목: 계좌별명, 계좌상태
3. 자동 수집항목: 접속IP, 접속일시, 서비스 이용기록

제3조 (개인정보 수집·이용 목적)
1. 계좌정보 조회 및 관리
2. 계좌이체 서비스 제공
3. 금융거래 내역 분석 및 서비스 개선
4. 금융사고 예방 및 보안 강화

제4조 (개인정보 보유·이용 기간)
1. 회사는 개인정보 수집·이용 목적이 달성된 후에는 지체없이 해당 개인정보를 파기합니다.
2. 단, 관련 법령에 의해 보존이 필요한 경우에는 해당 기간 동안 보존합니다.

제5조 (제3자 제공)
1. 회사는 고객의 동의 없이 개인정보를 제3자에게 제공하지 않습니다.
2. 단, 다음의 경우에는 예외로 합니다:
   가. 금융결제원에의 제공 (오픈뱅킹 서비스 제공을 위해)
   나. 법령에 의해 요구되는 경우
   다. 고객이 사전에 동의한 경우

제6조 (고객의 권리)
1. 고객은 언제든지 개인정보 수집·이용에 대한 동의를 철회할 수 있습니다.
2. 고객은 개인정보의 열람, 정정·삭제, 처리정지 등을 요구할 수 있습니다.
3. 고객의 권리 행사는 회사에 서면, 전화, 전자우편, 모사전송(FAX) 등을 통하여 하실 수 있으며 회사는 이에 대해 지체 없이 조치하겠습니다.

제7조 (개인정보의 안전성 확보조치)
1. 회사는 개인정보의 안전성 확보를 위해 다음과 같은 조치를 취하고 있습니다:
   가. 개인정보 암호화
   나. 해킹 등에 대비한 기술적 대책
   다. 개인정보에 대한 접근 제한
   라. 접속기록의 보관 및 위변조 방지

제8조 (개인정보보호책임자)
1. 개인정보 처리에 관한 업무를 총괄해서 책임지고, 개인정보 처리와 관련한 정보주체의 불만처리 및 피해구제 등을 위하여 아래와 같이 개인정보보호책임자를 지정하고 있습니다:
   - 성명: 이오픈뱅킹
   - 연락처: openbanking@walletslot.com

부칙
이 동의서는 2024년 1월 1일부터 시행합니다.`
  },
  openBankingService: {
    title: '오픈뱅킹 서비스 이용약관',
    content: `제1조 (목적)
이 약관은 Wallet Slot이 제공하는 오픈뱅킹 서비스의 이용과 관련하여 회사와 이용자 간의 권리, 의무 및 책임사항을 규정함을 목적으로 합니다.

제2조 (정의)
1. "오픈뱅킹 서비스"란 금융결제원의 오픈뱅킹 시스템을 통해 제공되는 금융서비스를 의미합니다.
2. "이용자"란 오픈뱅킹 서비스를 이용하고자 하는 회원을 의미합니다.

제3조 (서비스 내용)
1. 계좌조회 서비스
2. 계좌이체 서비스
3. 기타 금융결제원이 정하는 서비스

제4조 (이용자의 의무)
1. 이용자는 정확한 정보를 제공해야 합니다.
2. 이용자는 서비스 이용 시 관련 법령을 준수해야 합니다.

부칙
이 약관은 2024년 1월 1일부터 시행합니다.`
  },
  openBankingPrivacy: {
    title: '개인정보 수집·이용(오픈뱅킹)',
    content: `제1조 (개인정보 수집·이용 목적)
오픈뱅킹 서비스 제공을 위해 다음의 개인정보를 수집·이용합니다:

1. 필수 수집항목: 계좌번호, 계좌잔액, 거래내역
2. 선택 수집항목: 계좌별명, 계좌상태

제2조 (수집·이용 기간)
개인정보는 서비스 제공 목적이 달성된 후 즉시 파기됩니다.

제3조 (제3자 제공)
개인정보는 금융결제원에만 제공되며, 다른 제3자에게는 제공되지 않습니다.

부칙
이 방침은 2024년 1월 1일부터 시행합니다.`
  },
  openBankingThirdParty: {
    title: '개인정보 제3자 제공(오픈뱅킹)',
    content: `제1조 (제3자 제공 현황)
오픈뱅킹 서비스 제공을 위해 다음 기관에 개인정보를 제공합니다:

제공받는 자: 금융결제원
제공목적: 오픈뱅킹 서비스 제공
제공항목: 계좌번호, 계좌잔액, 거래내역
보유·이용기간: 서비스 제공 완료 시까지

제2조 (제공 근거)
정보주체의 동의

제3조 (제공받는 자의 개인정보 이용목적)
오픈뱅킹 서비스 제공

부칙
이 방침은 2024년 1월 1일부터 시행합니다.`
  }
};

export default function TermsDetailScreen() {
  const { type } = useLocalSearchParams<{ type: TermsType }>();
  
  if (!type || !termsContent[type]) {
    return (
      <SafeAreaView style={styles.safeArea}>
        <View style={styles.container}>
          <Text style={styles.errorText}>잘못된 약관 유형입니다.</Text>
        </View>
      </SafeAreaView>
    );
  }

  const terms = termsContent[type];

  return (
    <SafeAreaView style={styles.safeArea}>
      <View style={styles.header}>
        <TouchableOpacity 
          style={styles.backButton}
          onPress={() => router.back()}
        >
          <Text style={styles.backButtonText}>←</Text>
        </TouchableOpacity>
        <Text style={styles.headerTitle}>약관 상세</Text>
        <View style={styles.placeholder} />
      </View>
      
      <ScrollView style={styles.content} showsVerticalScrollIndicator={false}>
        <Text style={styles.title}>{terms.title}</Text>
        <Text style={styles.contentText}>{terms.content}</Text>
      </ScrollView>
    </SafeAreaView>
  );
}

const styles = StyleSheet.create({
  safeArea: {
    flex: 1,
    backgroundColor: '#FFFFFF',
  },
  container: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
    paddingHorizontal: 24,
  },
  errorText: {
    fontSize: 16,
    color: '#6B7280',
  },
  header: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
    paddingHorizontal: 20,
    paddingVertical: 16,
    borderBottomWidth: 1,
    borderBottomColor: '#E5E7EB',
  },
  backButton: {
    width: 40,
    height: 40,
    alignItems: 'center',
    justifyContent: 'center',
  },
  backButtonText: {
    fontSize: 24,
    color: '#3B82F6',
    fontWeight: 'bold',
  },
  headerTitle: {
    fontSize: 18,
    fontWeight: '600',
    color: '#111827',
  },
  placeholder: {
    width: 40,
  },
  content: {
    flex: 1,
    paddingHorizontal: 24,
    paddingTop: 24,
  },
  title: {
    fontSize: 20,
    fontWeight: '700',
    color: '#111827',
    marginBottom: 24,
    lineHeight: 28,
  },
  contentText: {
    fontSize: 14,
    color: '#374151',
    lineHeight: 22,
    marginBottom: 32,
  },
});
